<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°•ì˜ ê´€ë¦¬ - Ploytech ì‹œìŠ¤í…œ</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
        }

        .header {
            background-color: #5f3dc4;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: #ffffff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .logo::before {
            content: "ğŸ“š";
            font-size: 20px;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-link {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 20px;
            transition: background 0.3s;
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
            text-decoration: none;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .container {
            padding: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .page-header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-header h1 {
            color: #2d3436;
            font-size: 32px;
            margin: 0;
        }

        .page-header p {
            color: #636e72;
            font-size: 16px;
            margin: 5px 0 0 0;
        }

        .stats-summary {
            background: linear-gradient(45deg, #0984e3, #74b9ff);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stats-summary h3 {
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        .search-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .search-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 16px;
            box-sizing: border-box;
        }

        .search-input:focus {
            outline: none;
            border-color: #6c5ce7;
        }

        .courses-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 25px;
        }

        .course-card {
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s;
            background: #f8f9fa;
        }

        .course-card:hover {
            border-color: #0984e3;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(9, 132, 227, 0.1);
        }

        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .course-info {
            flex: 1;
        }

        .course-title {
            font-size: 20px;
            font-weight: bold;
            color: #2d3436;
            margin-bottom: 8px;
        }

        .course-code {
            color: #636e72;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .course-professor {
            color: #0984e3;
            font-weight: 500;
            font-size: 16px;
        }

        .course-stats {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #0984e3;
        }

        .stat-label {
            font-size: 12px;
            color: #636e72;
            margin-top: 5px;
        }

        .course-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .view-btn {
            background: linear-gradient(45deg, #0984e3, #74b9ff);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .view-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(9, 132, 227, 0.3);
        }

        .delete-btn {
            background: linear-gradient(45deg, #ff7675, #fd79a8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .delete-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 118, 117, 0.3);
        }

        .empty-message {
            text-align: center;
            color: #636e72;
            font-size: 18px;
            padding: 60px;
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .alert-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .course-status {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-active {
            background: linear-gradient(45deg, #00b894, #55efc4);
            color: white;
        }
    </style>
</head>
<body>
<div class="header">
    <div class="header-left">
        <div class="logo"></div>
        <div class="title">ê°•ì˜ ê´€ë¦¬</div>
    </div>
    <div class="nav-links">
        <a th:href="@{/admin/main}" class="nav-link">ëŒ€ì‹œë³´ë“œ</a>
        <a th:href="@{/admin/pending-users}" class="nav-link">ìŠ¹ì¸ ëŒ€ê¸°</a>
        <a th:href="@{/admin/approved-users}" class="nav-link">ìŠ¹ì¸ëœ ì‚¬ìš©ì</a>
        <a th:href="@{/admin/courses}" class="nav-link active">ê°•ì˜ ê´€ë¦¬</a>
        <a th:href="@{/admin/assignments}" class="nav-link">ê³¼ì œ ê´€ë¦¬</a>
        <a th:href="@{/logout}" class="logout-btn">ë¡œê·¸ì•„ì›ƒ</a>
    </div>
</div>

<div class="container">
    <!-- ì„±ê³µ/ì‹¤íŒ¨ ë©”ì‹œì§€ -->
    <div th:if="${param.deleted != null and param.deleted[0] == 'success'}" class="alert alert-success">
        ê°•ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.
    </div>

    <div th:if="${param.deleted != null and param.deleted[0] == 'error'}" class="alert alert-danger">
        ê°•ì˜ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
    </div>

    <div th:if="${param.error != null and param.error[0] == 'courseNotFound'}" class="alert alert-danger">
        ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê°•ì˜ì…ë‹ˆë‹¤.
    </div>

    <div class="page-header">
        <div>
            <h1>ì „ì²´ ê°•ì˜ ê´€ë¦¬</h1>
            <p>ì‹œìŠ¤í…œì— ë“±ë¡ëœ ëª¨ë“  ê°•ì˜ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”</p>
        </div>
        <div class="stats-summary">
            <h3 th:text="${#lists.size(courses)}">0</h3>
            <p>ì „ì²´ ê°•ì˜ ìˆ˜</p>
        </div>
    </div>

    <!-- ê²€ìƒ‰ ê¸°ëŠ¥ -->
    <div class="search-section">
        <input type="text" class="search-input" id="searchInput"
               placeholder="ê°•ì˜ëª…, ê°•ì˜ì½”ë“œ, êµìˆ˜ëª…ìœ¼ë¡œ ê²€ìƒ‰í•˜ì„¸ìš”...">
    </div>

    <!-- ê°•ì˜ ëª©ë¡ -->
    <div class="courses-section">
        <div th:if="${#lists.isEmpty(courses)}" class="empty-message">
            <div class="empty-icon">ğŸ“š</div>
            <p>ë“±ë¡ëœ ê°•ì˜ê°€ ì—†ìŠµë‹ˆë‹¤</p>
        </div>

        <div th:unless="${#lists.isEmpty(courses)}" class="courses-grid" id="coursesGrid">
            <div th:each="course : ${courses}" class="course-card"
                 th:data-name="${course.courseName}"
                 th:data-code="${course.courseCode}"
                 th:data-professor="${course.professor != null ? course.professor.name : ''}">

                <div class="course-header">
                    <div class="course-info">
                        <div class="course-title" th:text="${course.courseName}">ê°•ì˜ëª…</div>
                        <div class="course-code">ê°•ì˜ì½”ë“œ: <span th:text="${course.courseCode}">CS101</span></div>
                        <div class="course-professor" th:text="${course.professor != null ? course.professor.name + ' êµìˆ˜' : 'ë‹´ë‹¹êµìˆ˜ ì •ë³´ ì—†ìŒ'}">ê¹€êµìˆ˜ êµìˆ˜</div>
                    </div>
                    <span class="course-status status-active">ìš´ì˜ì¤‘</span>
                </div>

                <div class="course-stats">
                    <div class="stat-item">
                        <div class="stat-number" th:text="${course.studentCount}">0</div>
                        <div class="stat-label">ìˆ˜ê°•ìƒ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" th:text="${course.assignmentCount}">0</div>
                        <div class="stat-label">ê³¼ì œ</div>
                    </div>
                </div>

                <div class="course-actions">
                    <a th:href="@{'/admin/course/' + ${course.courseCode}}" class="view-btn">ìƒì„¸ë³´ê¸°</a>
                    <form th:action="@{/admin/delete-course}" method="post" style="display: inline;">
                        <input type="hidden" name="courseCode" th:value="${course.courseCode}">
                        <button type="submit" class="delete-btn"
                                onclick="return confirm('ì´ ê°•ì˜ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\n\\nâš ï¸ ê²½ê³ : ê°•ì˜ì™€ ê´€ë ¨ëœ ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.\\n- ìˆ˜ê°•ì‹ ì²­ ì •ë³´\\n- ëª¨ë“  ê³¼ì œ\\n- ëª¨ë“  ì œì¶œë¬¼\\n- ëª¨ë“  ì§ˆë¬¸ê³¼ ë‹µë³€\\n\\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')">
                            ğŸ—‘ï¸ ì‚­ì œ
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // ê²€ìƒ‰ ê¸°ëŠ¥
    document.getElementById('searchInput').addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const courseCards = document.querySelectorAll('#coursesGrid .course-card');

        courseCards.forEach(card => {
            const courseName = card.dataset.name.toLowerCase();
            const courseCode = card.dataset.code.toLowerCase();
            const professorName = card.dataset.professor.toLowerCase();

            if (courseName.includes(searchTerm) ||
                courseCode.includes(searchTerm) ||
                professorName.includes(searchTerm)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    });
</script>
</body>
</html>